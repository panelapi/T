import{s as w,S as b,_ as se,i as u,u as ie,a as de,b as ue}from"./index-d1ccb639.js";import{c as ce}from"./index-9f2c079c.js";import{F as re}from"./Footer-aa216de4.js";import{r as i,m as _e,p as J,o as E,c as W,b as o,q as e,w as n,t as s,z as m,a as c,T as x,x as ve,F as pe,X as me,G as fe,$ as ge,a0 as he,a3 as ye,W as xe,a4 as we,a5 as be,a6 as ke,a7 as $e,a8 as Ce,H as Fe,a9 as Ie,I as Se,J as Ue}from"./vendor-b5206b48.js";function q(){return w({url:b+"/api/v1/user/invite/fetch",method:"get"})}function ze(){return w({url:b+"/api/v1/user/invite/save",method:"get"})}function Me(){return w({url:b+"/api/v1/user/invite/details?page_size=999",method:"get"})}function Be(r){return w({url:b+`/api/v1/user/transfer?transfer_amount=${r}`,method:"post"})}function Re(r,v){return w({url:b+`/api/v1/user/ticket/withdraw?withdraw_method=${r}&withdraw_account=${v}`,method:"post"})}const f=r=>(Se("data-v-7c4720f6"),r=r(),Ue(),r),Te={key:0,class:"invite-container"},De={class:"money"},Ee={class:"money-title"},Ke={class:"money-text-large"},Oe={class:"money-title"},Ve={class:"money-text"},je={class:"money-title"},Le={class:"money-text"},Ne=f(()=>o("div",null,null,-1)),He={class:"link"},Je={class:"link-title"},We={class:"link-money-title"},qe={class:"link-money-text"},Ae={class:"link-money-title"},Ge={class:"link-money-text"},Pe=f(()=>o("div",null,null,-1)),Qe={class:"record"},Xe=f(()=>o("div",null,null,-1)),Ye={class:"account-modal"},Ze={class:"title"},et={class:"field-text"},tt=f(()=>o("span",{style:{color:"red","padding-right":"5px"}},"*",-1)),at={style:{"margin-top":"20px"}},nt={class:"field-text"},ot=f(()=>o("span",{style:{color:"red","padding-right":"5px"}},"*",-1)),lt={class:"money-modal"},st={class:"title"},it={class:"input-item"},dt={class:"field-text"},ut=f(()=>o("span",{style:{color:"red","padding-right":"5px"}},"*",-1)),ct={style:{"margin-top":"20px"}},rt={class:"field-text"},_t=f(()=>o("span",{style:{color:"red","padding-right":"5px"}},"*",-1)),vt={__name:"Invite",setup(r){const v=i(),K=i("1"),I=i(0),p=i(0),S=i(0),U=i(0),z=i(0),O=i(!1),k=i(!1),$=i(!1),A={pageSize:10,showSizeChanger:!0,hideOnSinglePage:!1,showQuickJumper:!1,showSizeChanger:!1};let V=i([]),j=i([]);const h=i(0),C=i(""),F=i([]),G=()=>{};async function P(){if(h.value==0){x.warning("请输入正确划转金额");return}if(p.value<h.value){x.warning("划转金额必须小于或等于余额");return}(await Be(h.value*100)).data==!0&&($.value=!1),M()}async function Q(){if(F.value.length==0){x.warning(u.global.t("请选择收款方式"));return}if(C.value.length==0){x.warning(u.global.t("请输入正确收款账号"));return}let t=await Re(F.value,C.value);console.log("s",t),t.data&&(k.value=!1),M()}async function M(){var _;const t=await Me();V.value=t.data;const a=await q();if(a!=null&&a.data.codes.length>0){let d=a.data.codes[0].code;v.value=window.location.origin+"/#/register?code="+d,I.value=(a.data.stat[1]/100).toFixed(2),p.value=(a.data.stat[4]/100).toFixed(2),S.value=((a.data.stat[1]-a.data.stat[4])/100).toFixed(2),U.value=a.data.stat[0],z.value=a.data.stat[3]+" %"}else await ze(),await X();O.value=!0,j=((_=ie().userConfig)==null?void 0:_.withdraw_methods)??[]}async function X(){const t=await q();if(t!=null&&t.data.codes.length>0){let a=t.data.codes[0].code;v.value=window.location.origin+"/#/register?code="+a,I.value=(t.data.stat[1]/100).toFixed(2),p.value=(t.data.stat[4]/100).toFixed(2),S.value=((t.data.stat[1]-t.data.stat[4])/100).toFixed(2),U.value=t.data.stat[0],z.value=t.data.stat[3]+" %"}}_e(async()=>{M()});const Y=[{title:u.global.t("invite.时间"),dataIndex:"created_at",key:"created_at",customRender:function(t){return Z(t.value)}},{title:u.global.t("invite.金额"),dataIndex:"get_amount",key:"get_amount",customRender:function(t){return(t.value/100).toFixed(2)}}];function Z(t){var a=new Date(t*1e3),y=a.getFullYear(),_=("0"+(a.getMonth()+1)).slice(-2),d=("0"+a.getDate()).slice(-2);return y+"-"+_+"-"+d}return(t,a)=>{const y=me,_=fe,d=ge,g=he,B=ye,R=J("a-flex"),T=xe,ee=we,te=be,ae=ke,ne=ue,oe=$e,D=de,L=J("info-circle-outlined"),N=Ce,H=Fe,le=Ie;return E(),W(pe,null,[O.value?(E(),W("div",Te,[o("div",De,[e(R,{class:"box",justify:"center",align:"center"},{default:n(()=>[e(g,{gutter:[25,25]},{default:n(()=>[e(d,{md:24,xs:24},{default:n(()=>[e(B,null,{default:n(()=>[o("div",Ee,s(t.$t("invite.已获得返利佣金")),1),o("div",Ke," ￥ "+s(I.value),1),e(y,{style:{height:"1px","background-color":"rgba(0, 0, 0, 0.11)"}}),e(g,null,{default:n(()=>[e(d,{md:12,xs:12},{default:n(()=>[o("div",Oe,s(t.$t("invite.可提现余额")),1),o("div",Ve," ¥ "+s(p.value),1),e(_,{type:"primary",onClick:a[0]||(a[0]=l=>k.value=!0)},{default:n(()=>[m(s(t.$t("invite.申请提现")),1)]),_:1})]),_:1}),e(d,{md:12,xs:12,class:"my-money"},{default:n(()=>[o("div",je,s(t.$t("invite.已提现佣金")),1),o("div",Le," ￥ "+s(S.value),1),o("div",null,[e(_,{type:"default",onClick:a[1]||(a[1]=l=>$.value=!0)},{default:n(()=>[m(s(t.$t("invite.收款信息")),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),Ne]),o("div",He,[e(R,{class:"box",justify:"center",align:"center"},{default:n(()=>[e(g,{gutter:[25,25]},{default:n(()=>[e(d,{md:24,xs:24},{default:n(()=>[e(B,null,{default:n(()=>[e(g,null,{default:n(()=>[e(d,{md:12,xs:12},{default:n(()=>[o("div",Je,s(t.$t("invite.您的专属邀请链接")),1)]),_:1}),e(d,{md:12,xs:12,class:"link-copy"},{default:n(()=>[o("div",null,[e(_,{type:"primary",onClick:a[2]||(a[2]=l=>{c(ce)(v.value),c(x).success(c(u).global.t("invite.链接已复制"))})},{default:n(()=>[m(s(t.$t("invite.复制链接")),1)]),_:1})])]),_:1})]),_:1}),e(g,null,{default:n(()=>[e(d,{class:"invite-link"},{default:n(()=>[e(T,{disabled:"",placeholder:"URL",value:v.value,"onUpdate:value":a[3]||(a[3]=l=>v.value=l)},null,8,["value"])]),_:1})]),_:1}),e(g,null,{default:n(()=>[e(d,{md:11,xs:11},{default:n(()=>[o("div",We,s(t.$t("invite.注册人数")),1),o("div",qe,s(U.value),1)]),_:1}),e(d,{md:2,xs:2},{default:n(()=>[e(y,{type:"vertical",style:{height:"50px","background-color":`rgba(
                                                210,
                                                210,
                                                210,
                                                0.37
                                            )`}})]),_:1}),e(d,{md:11,xs:11,class:"my-link"},{default:n(()=>[o("div",Ae,s(t.$t("invite.佣金比例")),1),o("div",Ge,s(z.value),1),Pe]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),o("div",Qe,[e(R,{class:"box",justify:"center",align:"center"},{default:n(()=>[e(B,null,{default:n(()=>[e(ae,{activeKey:K.value,"onUpdate:activeKey":a[4]||(a[4]=l=>K.value=l)},{default:n(()=>[e(te,{key:"1",tab:c(u).global.t("invite.返利记录")},{default:n(()=>[e(ee,{dataSource:c(V),columns:Y,pagination:A},null,8,["dataSource"])]),_:1},8,["tab"])]),_:1},8,["activeKey"])]),_:1})]),_:1}),Xe]),e(re)])):(E(),ve(ne,{key:1})),e(H,{open:k.value,"onUpdate:open":a[7]||(a[7]=l=>k.value=l),centered:"",width:"680px",closable:!1,"ok-text":c(u).global.t("invite.确定"),"cancel-text":c(u).global.t("invite.取消"),onOk:Q},{default:n(()=>[o("div",Ye,[o("div",Ze,s(t.$t("invite.配置您的提现收款方式")),1),o("div",null,[o("div",et,[tt,m(s(t.$t("invite.收款方式")),1)]),e(oe,{ref:"select",value:F.value,"onUpdate:value":a[5]||(a[5]=l=>F.value=l),placeholder:c(u).global.t("invite.请选择收款方式"),style:{width:"100%"},onFocus:G,onChange:t.accountHandleChange,size:"large",options:c(j).map(l=>({value:l}))},null,8,["value","placeholder","onChange","options"])]),o("div",at,[o("div",nt,[ot,m(s(t.$t("invite.收款账号")),1)]),e(T,{class:"acco",value:C.value,"onUpdate:value":a[6]||(a[6]=l=>C.value=l),placeholder:c(u).global.t("invite.请输入收款帐号")},{prefix:n(()=>[e(D,{name:"cardholder",size:"26px",color:"#000"})]),suffix:n(()=>[e(N,{title:"Extra information"},{default:n(()=>[e(L,{style:{color:"rgba(0, 0, 0, 0.45)"}})]),_:1})]),_:1},8,["value","placeholder"])])])]),_:1},8,["open","ok-text","cancel-text"]),e(H,{open:$.value,"onUpdate:open":a[10]||(a[10]=l=>$.value=l),centered:"",width:"680px",closable:!1,"ok-text":c(u).global.t("invite.确定"),"cancel-text":c(u).global.t("invite.取消"),onOk:P},{default:n(()=>[o("div",lt,[o("div",st,s(t.$t("invite.申请提现")),1),o("div",it,[o("div",dt,[ut,m(s(t.$t("invite.当前推广佣金余额")),1)]),e(T,{class:"i-disable",value:p.value,"onUpdate:value":a[8]||(a[8]=l=>p.value=l),placeholder:"{{ $t('invite.剩余金额') }}",readonly:""},{prefix:n(()=>[e(D,{name:"piggy-bank",size:"26px",color:"#000"})]),suffix:n(()=>[e(N,{title:"Extra information"},{default:n(()=>[e(L,{style:{color:"rgba(0, 0, 0, 0.45)"}})]),_:1})]),_:1},8,["value"])]),o("div",ct,[o("div",rt,[_t,m(s(t.$t("invite.划转金额")),1)]),e(le,{value:h.value,"onUpdate:value":a[9]||(a[9]=l=>h.value=l),size:"large",min:0,max:p.value,prefix:"￥",style:{width:"100%"},placeholder:"{{ $t('invite.请输入划转金额') }}",precision:2},{addonBefore:n(()=>[e(D,{name:"currency-circle-dollar",size:"26px",color:"#000"})]),_:1},8,["value","max"])])])]),_:1},8,["open","ok-text","cancel-text"])],64)}}},ht=se(vt,[["__scopeId","data-v-7c4720f6"]]);export{ht as default};
